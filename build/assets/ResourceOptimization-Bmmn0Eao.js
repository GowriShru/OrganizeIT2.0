import{i as se,r as n,j as e,A as te,e as ie,f as ae,l as u,C as i,b as r,c,D as ne,d as a,Z as re,T as ce,V as k,o as oe,q as de,s as j,t as v,B as x,h,P as le,S as me}from"./index-DtNahLzf.js";import{w as g,r as p}from"./api-CnfHayjd.js";import{t as f}from"./index-BR4xEgPS.js";import{T as ue}from"./target-BKHSCHFY.js";import{R as z,C as R,X as T,Y as I,B as y}from"./generateCategoricalChart-BVheJlJJ.js";import{A as xe,a as N}from"./AreaChart-TKF-TF37.js";import{B as he}from"./BarChart-nosETu6r.js";import{C as ge,H as pe,N as fe}from"./network-bGIkEeYD.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ve=se("timer",je);function Ie(){const[A,M]=n.useState([]),[O,E]=n.useState([]),[D,H]=n.useState([]),[P,L]=n.useState([]),[$,K]=n.useState([]),[m,U]=n.useState(null),[_,B]=n.useState(!0),[w,S]=n.useState(null);n.useEffect(()=>{const s=async()=>{try{S(null);try{const d="http://localhost:8080/api",l={"Content-Type":"application/json"}}catch{console.log("⚠️ API server not available, using enhanced fallback data")}const o=[{id:"OPT-001",title:"Right-size EC2 Instances",category:"Compute",impact:"High",effort:"Low",potentialSaving:24e3,currentCost:45e3,description:"23 oversized instances identified. Average CPU utilization: 15%",affectedResources:23,estimatedTime:"2 hours",priority:"High"},{id:"OPT-002",title:"Storage Class Optimization",category:"Storage",impact:"Medium",effort:"Low",potentialSaving:12e3,currentCost:28e3,description:"Move infrequently accessed data to IA and Glacier storage classes",affectedResources:156,estimatedTime:"4 hours",priority:"Medium"},{id:"OPT-003",title:"Reserved Instance Purchase",category:"Cost",impact:"High",effort:"Medium",potentialSaving:35e3,currentCost:89e3,description:"Purchase RIs for consistent workloads running 24/7",affectedResources:42,estimatedTime:"1 day",priority:"High"},{id:"OPT-004",title:"Auto-scaling Configuration",category:"Compute",impact:"Medium",effort:"Medium",potentialSaving:18e3,currentCost:62e3,description:"Implement dynamic scaling based on demand patterns",affectedResources:15,estimatedTime:"6 hours",priority:"Medium"}];M(o),E([{time:"00:00",cpu:25,memory:45,storage:67,network:23},{time:"04:00",cpu:18,memory:38,storage:68,network:15},{time:"08:00",cpu:45,memory:62,storage:69,network:35},{time:"12:00",cpu:78,memory:84,storage:70,network:58},{time:"16:00",cpu:85,memory:89,storage:71,network:67},{time:"20:00",cpu:62,memory:71,storage:72,network:45}]),H([{month:"Jan",compute:15e3,storage:8e3,network:3e3,database:5e3},{month:"Feb",compute:18e3,storage:9500,network:3200,database:5500},{month:"Mar",compute:22e3,storage:11e3,network:3500,database:6e3},{month:"Apr",compute:24e3,storage:12e3,network:3800,database:6200},{month:"May",compute:26e3,storage:12500,network:4e3,database:6500},{month:"Jun",compute:28e3,storage:13e3,network:4200,database:6800}]);const C=[{name:"Batch Processing",currentHours:"24/7",optimizedHours:"02:00-06:00",carbonReduction:35,costSaving:8500},{name:"ML Training",currentHours:"Business hours",optimizedHours:"22:00-06:00",carbonReduction:28,costSaving:12e3},{name:"Data Analytics",currentHours:"08:00-18:00",optimizedHours:"20:00-04:00",carbonReduction:22,costSaving:6800}];L(C);const b=[{metric:"CPU Efficiency",current:45,target:75,improvement:67},{metric:"Memory Efficiency",current:62,target:80,improvement:29},{metric:"Storage Efficiency",current:71,target:85,improvement:20},{metric:"Network Efficiency",current:58,target:75,improvement:29}];K(b);const Y=o.reduce((d,l)=>d+l.potentialSaving,0),Z=o.length*59,Q=b.reduce((d,l)=>d+l.current,0)/b.length,ee=C.reduce((d,l)=>d+l.carbonReduction*l.costSaving/1e3,0);U({potentialSavings:Y,resourceEfficiency:Math.round(Q),optimizations:Z,carbonReduction:Math.round(ee*100)/100})}catch(o){console.error("Error fetching resource optimization data:",o),S(o.message)}finally{B(!1)}};s();const t=setInterval(s,3e5);return()=>clearInterval(t)},[]);const F=g(async()=>{try{const s=new Date(Date.now()+72e5).toISOString(),t=await p.scheduleOptimization("comprehensive",s,["compute","storage","network"],{exclude_high_risk:!1});f.success(`Optimization scheduled for ${new Date(s).toLocaleString()}`)}catch(s){console.error("Failed to schedule optimization:",s)}}),W=g(async()=>{try{const s=await p.applyAllRecommendations(!0,!1);f.success(`Applied ${s.applied_count} recommendations - Est. savings: ${s.estimated_savings}`)}catch(s){console.error("Failed to apply recommendations:",s)}}),q=g(async s=>{try{const t=await p.getRecommendationDetails(s);f.success("Recommendation details retrieved"),console.log("Recommendation details:",t.recommendation)}catch(t){console.error("Failed to get recommendation details:",t)}}),V=g(async s=>{try{const t=await p.implementRecommendation(s,!0);f.success(`Implementation started - Tracking ID: ${t.implementation_id}`)}catch(t){console.error("Failed to implement recommendation:",t)}}),G=g(async s=>{try{const t={start_time:"22:00",end_time:"06:00",days:["Monday","Tuesday","Wednesday","Thursday","Friday"]},o=await p.configureWorkload(s,t,!0,!0);f.success(`Smart scheduling configured for ${s}`)}catch(t){console.error("Failed to configure workload:",t)}}),J=s=>{switch(s){case"High":return"destructive";case"Medium":return"secondary";case"Low":return"outline";default:return"outline"}},X=s=>{switch(s){case"High":return"destructive";case"Medium":return"secondary";case"Low":return"outline";default:return"outline"}};return _?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-64"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((s,t)=>e.jsx("div",{className:"h-32 bg-muted rounded"},t))}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})}):w?e.jsx("div",{className:"p-6",children:e.jsxs(te,{className:"border-destructive/50 bg-destructive/5",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsxs(ae,{children:["Failed to load resource optimization data: ",w,". Please check your connection and try again."]})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Resource Optimization"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered resource optimization and cost reduction"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",onClick:F,children:"Schedule Optimization"}),e.jsx(u,{onClick:W,children:"Apply All Recommendations"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(i,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Potential Savings"}),e.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsxs("div",{className:"text-2xl font-semibold",children:["$",m?.potentialSavings.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(m?.potentialSavings/289e3*100),"% cost reduction opportunity"]})]})]}),e.jsxs(i,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Resource Efficiency"}),e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsxs("div",{className:"text-2xl font-semibold",children:[m?.resourceEfficiency,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(ce,{className:"w-3 h-3 text-green-600"}),e.jsx("span",{className:"text-green-600",children:"+12% improvement"})]})]})]}),e.jsxs(i,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Optimizations"}),e.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-semibold",children:m?.optimizations}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active recommendations"})]})]}),e.jsxs(i,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Carbon Reduction"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsxs("div",{className:"text-2xl font-semibold",children:[m?.carbonReduction," tCO₂"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Monthly reduction potential"})]})]})]}),e.jsxs(oe,{defaultValue:"recommendations",className:"space-y-4",children:[e.jsxs(de,{children:[e.jsx(j,{value:"recommendations",children:"Recommendations"}),e.jsx(j,{value:"utilization",children:"Resource Utilization"}),e.jsx(j,{value:"scheduling",children:"Smart Scheduling"}),e.jsx(j,{value:"efficiency",children:"Efficiency Metrics"})]}),e.jsx(v,{value:"recommendations",className:"space-y-4",children:e.jsx("div",{className:"space-y-4",children:A.map(s=>e.jsx(i,{children:e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),e.jsxs(x,{variant:J(s.impact),children:[s.impact," Impact"]}),e.jsxs(x,{variant:"outline",children:[s.effort," Effort"]}),e.jsx(x,{variant:X(s.priority),children:s.priority})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Current Cost"}),e.jsxs("div",{children:["$",s.currentCost.toLocaleString(),"/month"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Resources"}),e.jsxs("div",{children:[s.affectedResources," affected"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Time Required"}),e.jsx("div",{children:s.estimatedTime})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:"Category"}),e.jsx("div",{children:s.category})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Monthly Savings"}),e.jsxs("div",{className:"text-2xl font-semibold text-green-600",children:["$",s.potentialSaving.toLocaleString()]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[Math.round(s.potentialSaving/s.currentCost*100),"% reduction"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.id," • Estimated ROI: ",Math.round(s.potentialSaving*12/(s.currentCost*.1)),"x"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",onClick:()=>q(s.id),children:"Details"}),e.jsx(u,{size:"sm",onClick:()=>V(s.id),children:"Implement"})]})]})]})},s.id))})}),e.jsx(v,{value:"utilization",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Resource Utilization Trends"}),e.jsx(h,{children:"24-hour utilization patterns across resources"})]}),e.jsx(a,{children:e.jsx(z,{width:"100%",height:300,children:e.jsxs(xe,{data:O,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"time"}),e.jsx(I,{}),e.jsx(N,{type:"monotone",dataKey:"cpu",stackId:"1",stroke:"#8884d8",fill:"#8884d8"}),e.jsx(N,{type:"monotone",dataKey:"memory",stackId:"1",stroke:"#82ca9d",fill:"#82ca9d"}),e.jsx(N,{type:"monotone",dataKey:"storage",stackId:"1",stroke:"#ffc658",fill:"#ffc658"}),e.jsx(N,{type:"monotone",dataKey:"network",stackId:"1",stroke:"#ff7300",fill:"#ff7300"})]})})})]}),e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Cumulative Cost Savings"}),e.jsx(h,{children:"Monthly optimization savings by category"})]}),e.jsx(a,{children:e.jsx(z,{width:"100%",height:300,children:e.jsxs(he,{data:D,children:[e.jsx(R,{strokeDasharray:"3 3"}),e.jsx(T,{dataKey:"month"}),e.jsx(I,{}),e.jsx(y,{dataKey:"compute",fill:"#8884d8",name:"Compute"}),e.jsx(y,{dataKey:"storage",fill:"#82ca9d",name:"Storage"}),e.jsx(y,{dataKey:"network",fill:"#ffc658",name:"Network"}),e.jsx(y,{dataKey:"database",fill:"#ff7300",name:"Database"})]})})})]})]})}),e.jsx(v,{value:"scheduling",className:"space-y-4",children:e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Smart Workload Scheduling"}),e.jsx(h,{children:"Optimize workload timing for cost and carbon reduction"})]}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:P.map((s,t)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Current: ",s.currentHours]}),e.jsx("span",{children:"→"}),e.jsxs("span",{children:["Optimized: ",s.optimizedHours]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["$",s.costSaving.toLocaleString(),"/month"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["-",s.carbonReduction,"% CO₂"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ve,{className:"w-3 h-3"}),"Auto-schedule"]}),e.jsxs(x,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-3 h-3"}),"Carbon-aware"]})]}),e.jsx(u,{size:"sm",onClick:()=>G(s.name),children:"Configure"})]})]},t))})})]})}),e.jsx(v,{value:"efficiency",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Efficiency Metrics"}),e.jsx(h,{children:"Current vs target resource efficiency"})]}),e.jsx(a,{className:"space-y-6",children:$.map((s,t)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:s.metric}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.current,"% / ",s.target,"%"]})]}),e.jsx(le,{value:s.current/s.target*100}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.improvement,"% improvement opportunity"]})]},t))})]}),e.jsxs(i,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Optimization Impact"}),e.jsx(h,{children:"Projected improvements from AI recommendations"})]}),e.jsxs(a,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Compute Optimization"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Right-sizing and auto-scaling can improve efficiency by 67%"}),e.jsx("div",{className:"mt-2 text-lg font-semibold text-green-600",children:"$42,000/month savings"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pe,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Storage Optimization"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Intelligent tiering and cleanup can reduce costs by 43%"}),e.jsx("div",{className:"mt-2 text-lg font-semibold text-green-600",children:"$12,000/month savings"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(fe,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"Network Optimization"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"CDN and traffic optimization can reduce bandwidth costs"}),e.jsx("div",{className:"mt-2 text-lg font-semibold text-green-600",children:"$8,500/month savings"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(me,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"font-medium",children:"Infrastructure Optimization"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reserved instances and spot pricing strategies"}),e.jsx("div",{className:"mt-2 text-lg font-semibold text-green-600",children:"$26,500/month savings"})]})]})]})]})})]})]})}export{Ie as ResourceOptimization};
