import{r as w,j as s,C as S,b as C,c as O,h as R,d as P,l as D,X as V,o as F,q as L,s as U,t as B,B as j,e as H,k as W}from"./index-DtNahLzf.js";import{t as $}from"./index-BR4xEgPS.js";import{h as X,g as J,o as f,f as y,b as k,p,c as l,r as m,i as g,n as E,s as K,e as Z,d as v}from"./api-CnfHayjd.js";import{L as q,C as Q}from"./loader-circle-C-Fop8UA.js";function ne(){const[r,M]=w.useState({}),[b,G]=w.useState(!1),[N,I]=w.useState("idle"),A=(e,a,n)=>{M(c=>({...c,[e]:c[e]?.map((u,x)=>x===a?{...u,...n}:u)||[]}))},T=()=>{M({"System Health":[{name:"Health Check API",status:"pending"},{name:"Data Initialization Check",status:"pending"}],"IT Operations":[{name:"Get Operations Data",status:"pending"},{name:"Restart Service",status:"pending"},{name:"Scale Service",status:"pending"},{name:"Resolve Alert",status:"pending"}],FinOps:[{name:"Get FinOps Data",status:"pending"},{name:"Apply Optimization",status:"pending"},{name:"Set Budget Alert",status:"pending"},{name:"Export Financial Report",status:"pending"}],"ESG Monitoring":[{name:"Get ESG Data",status:"pending"},{name:"Update ESG Target",status:"pending"},{name:"Generate ESG Report",status:"pending"}],"Project Collaboration":[{name:"Get Projects Data",status:"pending"},{name:"Create Project",status:"pending"},{name:"Create Task",status:"pending"},{name:"Update Project Status",status:"pending"},{name:"Edit Task",status:"pending"},{name:"Send Team Message",status:"pending"}],"AI Insights":[{name:"Run AI Analysis",status:"pending"},{name:"Run Optimization",status:"pending"},{name:"Train Model",status:"pending"},{name:"Generate Report",status:"pending"},{name:"Dismiss Insight",status:"pending"},{name:"Implement Insight",status:"pending"},{name:"Retrain Model",status:"pending"},{name:"Deploy Model",status:"pending"}],"Resource Optimization":[{name:"Configure Auto-Scaling",status:"pending"},{name:"Start Cleanup",status:"pending"},{name:"Schedule Optimization",status:"pending"},{name:"Apply All Recommendations",status:"pending"},{name:"Get Recommendation Details",status:"pending"},{name:"Implement Recommendation",status:"pending"},{name:"Configure Workload",status:"pending"}],"Identity Management":[{name:"Reset Password",status:"pending"},{name:"Update Permissions",status:"pending"},{name:"Export Users",status:"pending"},{name:"Add User",status:"pending"},{name:"Manage User",status:"pending"},{name:"Verify Credential",status:"pending"},{name:"Renew Credential",status:"pending"}],Notifications:[{name:"Get Notifications",status:"pending"},{name:"Mark as Read",status:"pending"},{name:"Configure Notifications",status:"pending"}],"Search & Export":[{name:"Global Search",status:"pending"},{name:"Export Data",status:"pending"}],"Audit Trails":[{name:"Apply Filters",status:"pending"},{name:"Export Audit Logs",status:"pending"},{name:"Search Logs",status:"pending"},{name:"Get Log Details",status:"pending"}]})};w.useEffect(()=>{T()},[]);const _=async()=>{G(!0),I("running"),T();try{await t("System Health",0,async()=>({success:!0,message:`Status: ${(await X.checkHealth()).status}`})),await t("System Health",1,async()=>({success:!0,message:`Initialized: ${(await J.checkInitialized()).initialized}`})),await t("IT Operations",0,async()=>({success:!0,message:`Loaded ${(await f.getOperationsData()).alerts?.data?.length||0} alerts`})),await t("IT Operations",1,async()=>({success:!0,message:(await f.restartService("test-service-001")).message||"Service restart initiated"})),await t("IT Operations",2,async()=>({success:!0,message:(await f.scaleService("test-service-001",3)).message||"Service scaled to 3 instances"})),await t("IT Operations",3,async()=>({success:!0,message:(await f.resolveAlert("test-alert-001","Test resolution")).message||"Alert resolved"})),await t("FinOps",0,async()=>{const e=await y.getFinOpsData();return{success:!0,message:"Loaded cost data"}}),await t("FinOps",1,async()=>({success:!0,message:(await y.applyOptimization("OPT-001")).message||"Optimization applied"})),await t("FinOps",2,async()=>({success:!0,message:(await y.setBudgetAlert(1e5,"test@example.com")).message||"Budget alert configured"})),await t("FinOps",3,async()=>({success:!0,message:(await y.exportReport("cost-analysis",{start:"2024-01-01",end:"2024-12-31"},"pdf")).message||"Report exported"})),await t("ESG Monitoring",0,async()=>{const e=await k.getESGData();return{success:!0,message:"Loaded ESG data"}}),await t("ESG Monitoring",1,async()=>({success:!0,message:(await k.updateTarget("carbon_reduction",30)).message||"Target updated"})),await t("ESG Monitoring",2,async()=>({success:!0,message:(await k.generateReport("quarterly",["scope1","scope2"])).message||"ESG report generated"})),await t("Project Collaboration",0,async()=>({success:!0,message:`Loaded ${(await p.getProjectsData()).data?.projects?.length||0} projects`})),await t("Project Collaboration",1,async()=>({success:!0,message:(await p.createProject({name:"Test Project",description:"Test project description",priority:"High",budget:5e4,team_size:5,end_date:"2024-12-31"})).message||"Project created"})),await t("Project Collaboration",2,async()=>({success:!0,message:(await p.createTask({title:"Test Task",project:"Test Project",assignee:"Test User",priority:"High",dueDate:"2024-12-31"})).message||"Task created"})),await t("Project Collaboration",3,async()=>({success:!0,message:(await p.updateProjectStatus("PRJ-001","In Progress","Test update")).message||"Project status updated"})),await t("Project Collaboration",4,async()=>({success:!0,message:(await p.editTask("TSK-001",{status:"In Progress",notes:"Test edit"})).message||"Task updated"})),await t("Project Collaboration",5,async()=>({success:!0,message:(await p.sendTeamMessage("user-001","Test message")).message||"Message sent"})),await t("AI Insights",0,async()=>({success:!0,message:(await l.runAnalysis("cost-optimization")).message||"Analysis completed"})),await t("AI Insights",1,async()=>({success:!0,message:(await l.runOptimization("resource","cost")).message||"Optimization completed"})),await t("AI Insights",2,async()=>({success:!0,message:(await l.trainModel("cost-predictor")).message||"Model training initiated"})),await t("AI Insights",3,async()=>({success:!0,message:(await l.generateReport("insights","monthly",!0)).message||"Report generated"})),await t("AI Insights",4,async()=>({success:!0,message:(await l.dismissInsight("INS-001","Not applicable")).message||"Insight dismissed"})),await t("AI Insights",5,async()=>({success:!0,message:(await l.implementInsight("INS-002")).message||"Insight implemented"})),await t("AI Insights",6,async()=>({success:!0,message:(await l.retrainModel("model-001",!0)).message||"Model retraining initiated"})),await t("AI Insights",7,async()=>({success:!0,message:(await l.deployModel("model-001","production","gradual")).message||"Model deployment initiated"})),await t("Resource Optimization",0,async()=>({success:!0,message:(await m.configureAutoScaling("compute",{min:2,max:10})).message||"Auto-scaling configured"})),await t("Resource Optimization",1,async()=>({success:!0,message:(await m.startCleanup(["storage","compute"])).message||"Cleanup initiated"})),await t("Resource Optimization",2,async()=>({success:!0,message:(await m.scheduleOptimization("cost","2024-12-31T00:00:00Z")).message||"Optimization scheduled"})),await t("Resource Optimization",3,async()=>({success:!0,message:(await m.applyAllRecommendations(!0,!0)).message||"All recommendations applied"})),await t("Resource Optimization",4,async()=>{const e=await m.getRecommendationDetails("REC-001");return{success:!0,message:"Got details for recommendation"}}),await t("Resource Optimization",5,async()=>({success:!0,message:(await m.implementRecommendation("REC-001",!0)).message||"Recommendation implemented"})),await t("Resource Optimization",6,async()=>({success:!0,message:(await m.configureWorkload("analytics-batch",{schedule:"nightly"},!0,!0)).message||"Workload configured"})),await t("Identity Management",0,async()=>({success:!0,message:(await g.resetPassword("user-001","test@example.com")).message||"Password reset initiated"})),await t("Identity Management",1,async()=>({success:!0,message:(await g.updatePermissions("user-001",["read","write"])).message||"Permissions updated"})),await t("Identity Management",2,async()=>({success:!0,message:(await g.exportUsers("csv",{},!1)).message||"Users exported"})),await t("Identity Management",3,async()=>({success:!0,message:(await g.addUser({name:"Test User",email:"test@example.com",role:"User",permissions:["read"],send_invite:!1})).message||"User added"})),await t("Identity Management",4,async()=>({success:!0,message:(await g.manageUser("user-001","update",{status:"active"})).message||"User managed"})),await t("Identity Management",5,async()=>({success:!0,message:(await g.verifyCredential("CRED-001","blockchain")).message||"Credential verified"})),await t("Identity Management",6,async()=>({success:!0,message:(await g.renewCredential("CRED-001","12 months",!1)).message||"Credential renewed"})),await t("Notifications",0,async()=>({success:!0,message:`Loaded ${(await E.getNotifications()).data?.length||0} notifications`})),await t("Notifications",1,async()=>{const e=await E.markAsRead(["NOT-001"]);return{success:!0,message:"Notifications marked as read"}}),await t("Notifications",2,async()=>({success:!0,message:(await E.configureNotifications(["email","sms"],"daily",["alerts","reports"])).message||"Notifications configured"})),await t("Search & Export",0,async()=>({success:!0,message:`Found ${(await K.search("test query")).results?.length||0} results`})),await t("Search & Export",1,async()=>({success:!0,message:(await Z.exportData("dashboard","pdf",{start:"2024-01-01",end:"2024-12-31"},!0)).message||"Data exported"})),await t("Audit Trails",0,async()=>({success:!0,message:(await v.applyFilters({type:"login"})).message||"Filters applied"})),await t("Audit Trails",1,async()=>({success:!0,message:(await v.exportAuditLogs("csv",{start:"2024-01-01",end:"2024-12-31"},!0)).message||"Audit logs exported"})),await t("Audit Trails",2,async()=>({success:!0,message:`Found ${(await v.searchLogs("test query",{},"comprehensive")).results?.length||0} logs`})),await t("Audit Trails",3,async()=>{const e=await v.getLogDetails("LOG-001");return{success:!0,message:"Got log details"}}),I("complete"),$.success("All button functionality tests completed!")}catch(e){console.error("Test suite error:",e),$.error("Some tests encountered errors"),I("complete")}finally{G(!1)}},t=async(e,a,n)=>{A(e,a,{status:"testing"});try{const c=await n();A(e,a,{status:"success",message:c.message})}catch(c){A(e,a,{status:"error",error:c.message||"Test failed"})}},z=e=>{switch(e){case"pending":return s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"});case"testing":return s.jsx(q,{className:"w-5 h-5 text-blue-500 animate-spin"});case"success":return s.jsx(W,{className:"w-5 h-5 text-green-500"});case"error":return s.jsx(Q,{className:"w-5 h-5 text-red-500"});default:return null}},i=e=>{const a=r[e]||[],n=a.length,c=a.filter(d=>d.status==="success").length,u=a.filter(d=>d.status==="error").length,x=a.filter(d=>d.status==="pending").length,o=a.filter(d=>d.status==="testing").length;return{total:n,success:c,error:u,pending:x,testing:o}},h=(()=>{let e=0,a=0,n=0,c=0,u=0;return Object.keys(r).forEach(x=>{const o=i(x);e+=o.total,a+=o.success,n+=o.error,c+=o.pending,u+=o.testing}),{total:e,success:a,error:n,pending:c,testing:u}})();return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{children:"Button Functionality Audit"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Comprehensive test of all backend API endpoints and button functionalities"})]}),s.jsxs(S,{className:"mb-6",children:[s.jsxs(C,{children:[s.jsx(O,{children:"Overall Test Results"}),s.jsxs(R,{children:[N==="idle"&&'Click "Run All Tests" to begin testing',N==="running"&&"Tests in progress...",N==="complete"&&"All tests completed"]})]}),s.jsxs(P,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[s.jsx("div",{className:"font-bold",children:h.total}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tests"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[s.jsx("div",{className:"font-bold text-green-600",children:h.success}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Passed"})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 dark:bg-red-950 rounded-lg",children:[s.jsx("div",{className:"font-bold text-red-600",children:h.error}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Failed"})]}),s.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[s.jsx("div",{className:"font-bold text-blue-600",children:h.testing}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Testing"})]}),s.jsxs("div",{className:"text-center p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[s.jsx("div",{className:"font-bold text-gray-600",children:h.pending}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Pending"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(D,{onClick:_,disabled:b,className:"flex-1",children:b?s.jsxs(s.Fragment,{children:[s.jsx(q,{className:"w-4 h-4 mr-2 animate-spin"}),"Running Tests..."]}):s.jsxs(s.Fragment,{children:[s.jsx(V,{className:"w-4 h-4 mr-2"}),"Run All Tests"]})}),s.jsx(D,{variant:"outline",onClick:T,disabled:b,children:"Reset"})]})]})]}),s.jsxs(F,{defaultValue:Object.keys(r)[0],className:"w-full",children:[s.jsx(L,{className:"grid grid-cols-3 lg:grid-cols-6 w-full",children:Object.keys(r).slice(0,6).map(e=>{const a=i(e);return s.jsxs(U,{value:e,className:"relative",children:[e.split(" ")[0],a.error>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]},e)})}),Object.keys(r).map(e=>s.jsx(B,{value:e,children:s.jsxs(S,{children:[s.jsx(C,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(O,{children:e}),s.jsxs(R,{children:[i(e).success," / ",i(e).total," tests passed"]})]}),s.jsx(j,{variant:i(e).error>0?"destructive":"default",children:i(e).error>0?"Issues Found":"All Good"})]})}),s.jsx(P,{children:s.jsx("div",{className:"space-y-3",children:r[e]?.map((a,n)=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[s.jsx("div",{className:"mt-0.5",children:z(a.status)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium",children:a.name}),a.message&&s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["✓ ",a.message]}),a.error&&s.jsxs("div",{className:"text-sm text-red-600 mt-1 flex items-start gap-1",children:[s.jsx(H,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:a.error})]})]}),s.jsx("div",{children:s.jsx(j,{variant:a.status==="success"?"default":a.status==="error"?"destructive":"outline",children:a.status})})]},n))})})]})},e))]}),Object.keys(r).length>6&&s.jsxs(F,{defaultValue:Object.keys(r)[6],className:"w-full mt-6",children:[s.jsx(L,{className:"grid grid-cols-3 lg:grid-cols-6 w-full",children:Object.keys(r).slice(6).map(e=>{const a=i(e);return s.jsxs(U,{value:e,className:"relative",children:[e.split(" ")[0],a.error>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"})]},e)})}),Object.keys(r).slice(6).map(e=>s.jsx(B,{value:e,children:s.jsxs(S,{children:[s.jsx(C,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(O,{children:e}),s.jsxs(R,{children:[i(e).success," / ",i(e).total," tests passed"]})]}),s.jsx(j,{variant:i(e).error>0?"destructive":"default",children:i(e).error>0?"Issues Found":"All Good"})]})}),s.jsx(P,{children:s.jsx("div",{className:"space-y-3",children:r[e]?.map((a,n)=>s.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[s.jsx("div",{className:"mt-0.5",children:z(a.status)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium",children:a.name}),a.message&&s.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["✓ ",a.message]}),a.error&&s.jsxs("div",{className:"text-sm text-red-600 mt-1 flex items-start gap-1",children:[s.jsx(H,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:a.error})]})]}),s.jsx("div",{children:s.jsx(j,{variant:a.status==="success"?"default":a.status==="error"?"destructive":"outline",children:a.status})})]},n))})})]})},e))]})]})}export{ne as ButtonFunctionalityAudit};
